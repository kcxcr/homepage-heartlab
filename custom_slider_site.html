<script>
  function sendHeightToParent() {
    const height = document.documentElement.scrollHeight;
    parent.postMessage({ type: 'resize-iframe', height }, '*');
  }

  // 최초 로드 시
  window.addEventListener('load', sendHeightToParent);

  // 윈도우 리사이즈 시
  window.addEventListener('resize', sendHeightToParent);

  // DOM 변경 감지 시
  const observer = new MutationObserver(sendHeightToParent);
  observer.observe(document.body, { childList: true, subtree: true });

  // 이미지 로드 등 비동기 요소에도 대응
  setTimeout(sendHeightToParent, 500);
</script>
